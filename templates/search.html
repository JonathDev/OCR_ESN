<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Recherche</title>
</head>
<body>
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="/docs/5.3/assets/brand/bootstrap-logo.svg" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
                QuickBooks
            </a>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 position-sticky" style="top:0; height: 100vh; overflow-y: auto;">
                <h2>Recherche</h2>
                <form id="search-form" action="/search/" method="post">
                    <div class="mb-3">
                        <label for="start_date" class="form-label">Date de début</label>
                        <input type="date" class="form-control" name="start_date" value="{{ request.query_params.start_date }}">
                    </div>
                    <div class="mb-3">
                        <label for="end_date" class="form-label">Date de fin</label>
                        <input type="date" class="form-control" name="end_date" value="{{ request.query_params.end_date }}">
                    </div>
                    <div class="mb-3">
                        <label for="name_customer" class="form-label">Nom de l'entreprise</label>
                        <input type="text" class="form-control" name="name_customer" placeholder="Nom de l'entreprise" value="{{ request.query_params.name_customer }}">
                    </div>
                    <div class="mb-3">
                        <label for="number_invoice" class="form-label">Nom de la facture</label>
                        <input type="text" class="form-control" name="number_invoice" placeholder="Nom de la facture" value="{{ request.query_params.number_invoice }}">
                    </div>
                    <div class="mb-3">
                        <label for="name_product" class="form-label">Nom du produit</label>
                        <input type="text" class="form-control" name="name_product" placeholder="Nom du produit" value="{{ request.query_params.name_product }}">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Statut de la facture</label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paid" id="paid_all" value="" {{ "checked" if request.query_params.paid == "all" or not request.query_params.paid else "" }}>
                            <label class="form-check-label" for="paid_all">Toutes</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paid" id="paid_true" value="1" {{ "checked" if request.query_params.paid == "true" else "" }}>
                            <label class="form-check-label" for="paid_true">Payées</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paid" id="paid_false" value="0" {{ "checked" if request.query_params.paid == "false" else "" }}>
                            <label class="form-check-label" for="paid_false">Non payées</label>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Rechercher</button>
                </form>
            </div>
            <div class="col-md-9">
                <h2>Recherche de Factures</h2>
                <h3>Résultats:</h3>
                <div class="row"> 
                    {% if message %}
                        <p>{{ message }}</p>
                    {% else %}
                        {% for invoice in factures %}
                        <div class="col-md-3"> 
                            <div class="carte_visite_recto_verso">
                                <div class="carte carteModeRecto">
                                    <div class="couche recto">
                                        <div class="card" style="width: 100%;">
                                            <img src="..." class="card-img-top" alt="...">
                                            <div class="card-body">
                                                <h4 class="card-title text-center">{{ invoice.invoice_number }}</h4>
                                                <p class="card-text"> Date de la facture : {{invoice.date_invoice}}</p>
                                            </div>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">
                                                    <h5 class="text-center mb-3">Informations du client :</h5>
                                                    <div class="d-flex flex-column align-items-center">
                                                        <input type="text" class="form-control mb-2" value="{{ invoice.customer_name }}" placeholder="Nom du client" style="width: 90%;">
                                                        <input type="text" class="form-control" value="{{ invoice.category }}" placeholder="Catégorie" style="width: 90%;">
                                                    </div>
                                                </li>
                                                
                                                
                                                <li class="list-group-item">
                                                    <div class="text-center mb-2"> <!-- Classe Bootstrap pour centrer le texte et ajouter une marge en bas -->
                                                        <h5>Total de la facture :</h5>
                                                    </div>
                                                    <div class="d-flex justify-content-center"> <!-- Classe Bootstrap pour centrer le champ d'entrée -->
                                                        <div class="input-group mb-2 mr-sm-2">
                                                            <input type="number" class="form-control" value="{{ invoice.total_price }}" placeholder="Prix total" aria-label="Prix total en euros">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">€</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                                
                                                <li class="list-group-item d-flex justify-content-center align-items-center">
                                                    {% if invoice.paid %}
                                                        <input type="checkbox" checked disabled> <span>Réglé</span>
                                                    {% else %}
                                                        <input type="checkbox"> <span>Non payé</span>
                                                    {% endif %}
                                                </li>
                                                
                                                
                                                
                                                <li class="list-group-item">A third item</li>
                                            </ul>
                                            <div class="card-body">
                                                <button type="button" class="btn btn-primary" onclick="showVerso(this);">Factures</button>
                                                <button type="button" class="btn btn-primary" onclick="update();">Update</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="couche verso">Verso
                                        
                                        <button type="button" class="btn btn-primary" onclick="showRecto(this);">Produits</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="/static/script.js"></script>
</body>
</html>
