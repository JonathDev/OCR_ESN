<div class="col-md-3"> 
  <div id="{{ invoice.invoice_number }}" class="carte_visite_recto_verso ">
      <div class="carte carteModeRecto">
          <div class="couche recto">
              <div class="card" style="width: 100%;">
                  <div class="card-img-top d-flex justify-content-center align-items-center" style="height: 200px; background-color: #f8f8f8;">
                      {% if invoice.paid %}
                          <img class="image-facture"  src="/static/factureok.png" alt="Facture réglée">
                      {% else %}
                          <img class="image-facture" src="/static/facturenonok.png" alt="Facture non payée">
                      {% endif %}
                  </div>
                  <div class="card-body">
                      <h4 class="card-title text-center">{{ invoice.invoice_number }}</h4>
                      <p class="card-text"> Date de la facture : {{invoice.date_invoice}}</p>
                  </div>
                  <ul class="list-group list-group-flush">
                      <li class="list-group-item">
                          <h5 class="text-center mb-3">Informations du client :</h5>
                          <div class="d-flex flex-column align-items-center mb-3">
                              <input type="text" class="form-control mb-2" id="customer_name_{{ invoice.invoice_number }}" value="{{ invoice.customer_name }}" placeholder="Nom de l'entreprise" style="width: 90%;">
                              <input type="text" class="form-control" id="adresse_customer_{{ invoice.invoice_number }}" value="{{ invoice.adresse_customer }}" placeholder="Adresse" style="width: 90%;">
                          </div>
                          <h5 class="text-center mb-3">Catégorie du client :</h5>
                          <div class="d-flex justify-content-center">
                              <input type="text" class="form-control" id="invoice.category_{{invoice.invoice_number}}" value="{{ invoice.category }}" placeholder="Catégorie" style="width: 90%;">
                          </div>
                      </li>
                      
                      
                      <li class="list-group-item">
                          <div class="text-center mb-2"> <!-- Classe Bootstrap pour centrer le texte et ajouter une marge en bas -->
                              <h5>Total de la facture :</h5>
                          </div>
                          <div class="d-flex justify-content-center"> <!-- Classe Bootstrap pour centrer le champ d'entrée -->
                              <div class="input-group mb-2 mr-sm-2">
                                  <input type="number" class="form-control"  value="{{ invoice.total_price }}" placeholder="Prix total" aria-label="Prix total en euros">
                                  <div class="input-group-append">
                                      <span class="input-group-text">€</span>
                                  </div>
                              </div>
                          </div>
                      </li>
                      <li class="list-group-item d-flex justify-content-center align-items-center">
                          <input type="checkbox" id="paid_{{ invoice.invoice_number }}" onchange="togglePaidStatus(this, '{{ invoice.invoice_number }}')" {{ "checked" if invoice.paid }}>
                          <span>{{ "Réglé" if invoice.paid else "Non payé" }}</span>
                      </li>
                      <!--
                      <li class="list-group-item d-flex justify-content-center align-items-center">
                          {% if invoice.paid %}
                              <input type="checkbox" checked disabled> <span>Réglé</span>
                          {% else %}
                              <input type="checkbox"> <span>Non payé</span>
                          {% endif %}
                      </li>
                      -->
                      
                       <!-- Invoice Link with Icon -->
                       <li class="list-group-item d-flex justify-content-center align-items-center">
                          <a href="{{ invoice.invoice_link }}" target="_blank" title="Voir la facture" style="font-size: 24px; display: flex; align-items: center; justify-content: center;">
                              <i class="fas fa-file-invoice"></i>
                          </a>
                      </li>

                      <li class="list-group-item">
                          <button type="button" class="btn btn-primary" onclick="showVerso(this);">Factures</button>
                          <button type="button" onclick="updateInvoice('{{invoice.invoice_number}}')">Update</button>


                      </li>
                  </ul>
              </div>
          </div>
          <div class="couche verso">
              <div class="card" style="width: 18rem;">
                  <div class="card-header">
                      Produits :
                    </div>                                            
                  <ul class="list-group list-group-flush">
                  {% for product in invoice.products %}
                  <li class="list-group-item">
                      <div class="form-group">
                          <input type="text" class="form-control mb-2 product-name" id="product_name_{{ invoice.invoice_number }}_{{ product.productID }}" data-invoice-number="{{ invoice.number_invoice }}" data-product-id="{{ product.productID }}" value="{{ product.product_name }}" placeholder="Nom du produit">
                      </div>
                      <div class="d-flex justify-content-between align-items-center">
                          <div class="form-group flex-grow-1 mr-2">
                              <input type="number" class="form-control quantite" id="product_quantity_{{ invoice.invoice_number }}_{{ product.productID }}" data-invoice-number="{{ invoice.number_invoice }}" data-product-id="{{ product.productID }}" value="{{ product.quantity }}" placeholder="Quantité" min="1">
                          </div>
                          <div class="form-group flex-grow-1">
                              <input type="text" class="form-control prix-unitaire" id="product_unit_price_{{ invoice.invoice_number }}_{{ product.productID }}" data-invoice-number="{{ invoice.number_invoice }}" data-product-id="{{ product.productID }}" value="{{ product.unit_price }}" placeholder="Prix unitaire">
                          </div>
                          <button class="btn btn-danger btn-supprimer">
                              <i class="fas fa-trash"></i>
                          </button>
                      </div>
                  </li>
                  {% endfor %}
                  <li class="list-group-item font-weight-bold">
                      <div class="text-right">
                          Total : <span class="total" id="total_span_{{ invoice.invoice_number }}">0</span> €
                      </div>
                      
                  </li>
                  
                  </ul>

                
                </div>
              
              
          </div>
      </div>
  </div>
</div>